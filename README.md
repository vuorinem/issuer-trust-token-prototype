# Issuer Trust Token prototype

This is a prototype project for verifying a truster Verifiable Credential issuer based on
a token that is included in the credential.

### Roles:

- **Root Issuer (RI)** is an issuer that is automatically trusted by the Verifier. The Root
Issuer is identified by a DID.
- **Delegate Issuer (DI)** is an issuer that has been authorized by a Root Issuer to issue a
specific Credential Type. The Delegate Issuer is identified by a DID.
- **Issuer Trust Token (ITT)** is a signature generated by the Root Issuer when authorizing the
Delegate Issuer. The signature is calculated from the delegate issuer DID and a Credential Type.
- **Verifier** is an application that receives a Verifiable Credential with a Trusted
Issuer Signature attribute.

When the Verifier wants to verify that a VC it has received comes from a trusted issuer,
it can verify the Issuer Trust Token within the credential.

### Issuer Trust Token format

The ITT is a JWT generated by the RI and shared with the DI. It can be shared via any channel
as it doesn't include any sensitive information, and cannot be used by other issuers.

Example VC with an ITT attribute:

```json
{
  "@context": [
    "https://www.w3.org/2018/credentials/v1"
  ],
  "type": ["VerifiableCredential", "ExampleCredential"],
  "issuer": "did:example:sample-delegate-issuer",
  "issuanceDate": "2022-01-04T10:12:00Z",
  "credentialSubject": {
    "id": "did:example:sample-subject",
    "name": "Example",
    "description": "This is an example",
    "itt": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXhhbXBsZTpzYW1wbGUtZGVsZWdhdGUtaXNzdWVyIiwiY3JlZGVudGlhbFR5cGUiOiJFeGFtcGxlQ3JlZGVudGlhbCIsImlhdCI6IjIwMjItMDEtMDFUMTI6MDA6MDBaIiwiZXhwIjoiMjAyMi0xMi0yNFQxMjowMDowMFoifQ.kvdjH97lyiFKHhmdmYSbgcoS6FAHK30cKfApJ69Luk0"
  },
  "proof": {}
}
```

The ITT payload:

```json
{
  "sub": "did:example:sample-delegate-issuer",
  "credentialType": "ExampleCredential",
  "iat": "2022-01-01T12:00:00Z",
  "exp": "2022-12-24T12:00:00Z"
}
```

The steps for the Verifier to check the ITT are:

1. Validate the JWT signature using key information from RI
2. Check that the `sub` claim matches the DID of the DI
3. Check that the JWT was valid at the time when the VC was issued
4. Check that the `credentialType` claim matches the VC type
